{% macro osp_systeminfo_modal(version) %}
 <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalTitle" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content shadow">
        <div class="modal-body">
            <div class="float-end">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="text-center w-100">
              <div class="mx-auto">
                <img class="aboutLogo" src="/static/img/logo.png">
              </div>
            <p class="pt-4 textShadow">
              Open Streaming Platform Version <b>{{version}}</b>
            </p>
          </div>
          <div>
            <table>
              <tbody>
                <tr>
                  <td><i class="ps-5 bi bi-globe"></i> Website</td>
                  <td><a class="ps-3" href="https://openstreamingplatform.com">openstreamingplatform.com</a></td>
                </tr>
                <tr>
                  <td><i class="ps-5 bi bi-code-slash"></i> Code repository</td>
                  <td><a class="ps-3" href="https://gitlab.com/osp-group/flask-nginx-rtmp-manager/">osp-group/flask-nginx-rtmp-manager</a></td>
                </tr>
                <tr>
                    <td><i class="ps-5 bi bi-chat-left-quote-fill"></i> Forums</td>
                    <td><a class="ps-3" href="https://forums.openstreamingplatform.com">forums.openstreamingplatform.com</a></td>
                </tr>
                <tr>
                    <td><i class="ps-5 bi bi-file-richtext"></i> Wiki</td>
                    <td><a class="ps-3" href="https://wiki.openstreamingplatform.com">wiki.openstreamingplatform.com</a></td>
                </tr>
                <tr>
                  <td><i class="ps-5 bi bi-reddit"></i> Reddit</td>
                  <td><a class="ps-3" href="https://reddit.com/r/openstreamingplatform">/r/openstreamingplatform</a></td>
                </tr>
                <tr>
                  <td><i class="ps-5 bi bi-discord"></i> Discord</td>
                  <td><a class="ps-3" href="https://discord.gg/Jp5rzbD">Open Streaming Platform</a></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="text-center">
            <p class="pt-4">
              <i class="bi bi-card-text"></i><br>
              MIT License
            </p>
          </div>
        </div>
      </div>
    </div>
</div>
{% endmacro %}

{% macro osp_videoupload_modal(topicList, channelList) %}
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalTitle" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <form id="uploadform" action="/upload/video-details" enctype=multipart/form-data method="post">
          <div class="modal-header">
            <h5 class="modal-title" id="moveModalTitle">Upload a video</h5>
              <div class="float-end">
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="canceluploads();"></button>
              </div>
          </div>
          <div class="modal-body">
            <div class="form-group">
              <label for="videoTitle">Title</label>
              <input class="form-control" id="videoTitle" name="videoTitle">
            </div>
            <div class="form-group">
              <label for="uploadToChannelID">Channel</label>
              <select name="uploadToChannelID" class="form-control" required>
                {% for chan in channelList %}
                <option value="{{chan.id}}">{{chan.channelName}}</option>
                {% endfor %}
              </select>
            </div>
            <div class="form-group">
              <label for="uploadTopic">Topic</label>
              <select name="uploadTopic" class="form-control" required>
                {% for topic in topicList %}
                <option value="{{topic.id}}">{{topic.name}}</option>
                {% endfor %}
              </select>
            </div>

            <span>Thumbnail <span id="thumbnailuploadstatus"></span></span>
            <!-- hidden dropzone -->
            <div class="dropzone" id="thumbnaildropper" enctype="multipart/form-data"></div>
            <div class="form-group row">
              <div class="col-2 my-auto">
                <button id="thumbnailuploadbutton" type="button" class="btn btn-sm btn-primary">Browse</button>
              </div>
              <div class="col-10">
                <input class="form-control pl-2 form-control" id="thumbnailFilenameDisplay" name="thumbnailFilename" placeholder="Filename" disabled />
                <input type="hidden" class="form-control pl-2 form-control" id="thumbnailFilename" name="thumbnailFilename" placeholder="Filename" />
              </div>
            </div>

            <div class="progress progress-striped active my-2" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
              <div id="thumbnailuploadprogress" class="progress-bar progress-bar-success bg-success" style="color: white; width:0%;" data-dz-uploadprogress></div>
            </div>

            <span>Video file <span id="videouploadstatus"></span></span>
            <!-- hidden dropzone -->
            <div class="dropzone" id="videodropper" enctype="multipart/form-data"></div>
            <div class="form-group row">
              <div class="col-2 my-auto">
                <button id="videouploadbutton" type="button" class="btn btn-sm btn-primary">Browse</button>
              </div>
              <div class="col-10">
                <input class="form-control pl-2 form-control" id="videoFilenameDisplay" name="videoFilename" placeholder="Filename" disabled />
                <input type="hidden" class="form-control pl-2 form-control" id="videoFilename" name="videoFilename" placeholder="Filename" />
              </div>
            </div>

            <div class="progress progress-striped active my-2" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
              <div id="videouploadprogress" class="progress-bar progress-bar-success bg-success" style="color: white; width:0%;" data-dz-uploadprogress></div>
            </div>

            <div class="form-group">
              <label for="videoDescription">Video description</label>
              <textarea class="form-control" id="videoDescription" name="videoDescription" rows="3"></textarea>
            </div>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="canceluploads()">Cancel</button>
            <button id="uploadbutton" type="submit" class="btn btn-success" disabled>Upload</button>
          </div>
        </form>
      </div>
    </div>
</div>
<script>
    var easymde_VideoDescription = new EasyMDE({ autoDownloadFontAwesome: false, spellChecker: false, element: document.getElementById("videoDescription") });
</script>
{% endmacro %}

{% macro add_video_comment(videoID) %}
<!--Add Video Comments Modal-->
<div class="modal fade" id="commentModal" tabindex="-1" role="dialog" aria-labelledby="commentModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      {% if current_user.is_authenticated == True %}
      <form action="/play/{{videoID}}/comment" method="post">
        <div class="modal-body">
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="form-group">
            <label for="commentText" class="fs-5">Comment</label>
            <textarea class="form-control" id="commentText" name="commentText" rows="3" maxlength="2048"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close">Close</button>
          <input type="submit" class="btn btn-primary" value="Submit">
        </div>
      </form>
      {% else %}
      <div class="modal-body">
        You must be logged in to post a comment. <br><br>
        <a href="/login" class="btn btn-primary">Login</a>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<script>
    var easymde_Comments = new EasyMDE({ autoDownloadFontAwesome: false, spellChecker: false, element: document.getElementById("commentText") });
</script>
{% endmacro %}

{% macro add_oauth_provider() %}
<div class="modal fade" id="newOauthModal" tabindex="-1" role="dialog" aria-labelledby="newOAuthModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" id="OAuthForm" method="post">
      <div class="modal-header">
        <h5 class="modal-title" id="newOauthModalTitle">Add/Edit an OAuth Provider</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="form-group col-md-12">
                    <label for="oAuthPreset">Authentication Type</label>
                    <select class="form-control required" id="oAuthPreset" name="oAuthPreset" required>
                        <option value="Custom">Custom OAuth2</option>
                        <option value="Discord">Discord</option>
                        <option value="Reddit">Reddit</option>
                        <option value="Facebook">Facebook</option>
                    </select>
                </div>
                <div class="col-md-6 col-12">
                    <div id="oAuthNameDiv" class="form-group col-md-12">
                        <label for="oAuthName">OAuth Provider ID</label>
                        <input type="text" class="form-control required" id="oAuthName" name="oAuthName" maxlength="40" pattern="^\S+$" required>
                        <small id="oAuthHelp" class="form-text text-muted">Used for Internal Identification.  No Spaces</small>
                    </div>
                    <div id="oAuthFriendlyNameDiv" class="form-group col-md-12">
                        <label for="oAuthFriendlyName">OAuth Provider Friendly Name</label>
                        <input type="text" class="form-control required" id="oAuthFriendlyName" name="oAuthFriendlyName" maxlength="64" required>
                    </div>
                    <div id="oAuthColorDiv" class="form-group col-md-12">
                        <label for="oAuthName">Login Button Color</label>
                        <input type="color" class="form-control required" id="oAuthColor" name="oAuthColor" required>
                    </div>
                    <hr>
                    <div id="oAuthClient_idDiv" class="form-group col-md-12">
                        <label for="oAuthClient_id">Client ID</label>
                        <input type="text" class="form-control required" id="oAuthClient_id" name="oAuthClient_id" pattern="^\S+$" required>
                    </div>
                    <div id="oAuthClient_secretDiv"  class="form-group col-md-12">
                        <label for="oAuthClient_secret">Client Secret</label>
                        <input type="password" class="form-control required" id="oAuthClient_secret" name="oAuthClient_secret" required>
                    </div>
                    <div id="oAuthAccess_token_urlDiv" class="form-group col-md-12">
                        <hr>
                        <label for="oAuthAccess_token_url">Access Token URL</label>
                        <input type="text" class="form-control required" id="oAuthAccess_token_url" name="oAuthAccess_token_url" pattern="^\S+$" required>
                    </div>
                    <div id="oAuthAccess_token_paramsDiv" class="form-group col-md-12">
                        <label for="oAuthAccess_token_params">Access Token Params</label>
                        <textarea id="oAuthAccess_token_params" class="form-control" name="oAuthAccess_token_params"></textarea>
                    </div>
                    <div id="oAuthAuthorize_urlDiv" class="form-group col-md-12">
                        <label for="oAuthAuthorize_url">Authorize URL</label>
                        <input type="text" class="form-control required" id="oAuthAuthorize_url" name="oAuthAuthorize_url" pattern="^\S+$" required>
                    </div>
                    <div id="oAuthAuthorize_paramsDiv" class="form-group col-md-12">
                        <label for="oAuthAuthorize_params">Authorize Params</label>
                        <textarea class="form-control" id="oAuthAuthorize_params" name="oAuthAuthorize_params"></textarea>
                    </div>
                </div>
                <div class="col-md-6 col-12">
                    <div id="oAuthApi_base_urlDiv" class="form-group col-md-12">
                        <label for="oAuthApi_base_url">API Base URL</label>
                        <input type="text" class="form-control required" id="oAuthApi_base_url" name="oAuthApi_base_url" pattern="^\S+$" required>
                        <small id="oAuthApi_base_urlHelp" class="form-text text-muted">Full URI for API Requests (including trailing /)</small>
                    </div>
                    <div id="oAuthClient_kwargsDiv" class="form-group col-md-12">
                        <label for="oAuthClient_kwargs">Client Kwargs</label>
                        <textarea class="form-control" id="oAuthClient_kwargs" name="oAuthClient_kwargs"></textarea>
                        <small id="oAuthClient_kwargsHelp" class="form-text text-muted">JSON Payload Request - Typically Includes oAuth Client Scope</small>
                    </div>

                    <div id="oAuthProfile_endpointDiv" class="form-group col-md-12">
                        <hr>
                        <label for="oAuthProfile_endpoint">Profile Endpoint</label>
                        <input type="text" class="form-control required" id="oAuthProfile_endpoint" name="oAuthProfile_endpoint" required>
                        <small id="oAuthProfile_endpointHelp" class="form-text text-muted">Relative Path of API Base URL to Retrieve Login User's Profile (no leading /)</small>
                    </div>
                    <div id="oAuthIDValueDiv" class="form-group col-md-12">
                        <label for="oAuthUsername">ID Profile Value</label>
                        <input type="text" class="form-control required" id="oAuthIDValue" name="oAuthIDValue" required>
                        <small id="oAuthIDValueHelp" class="form-text text-muted">Unique ID Attribute Retrieved from Profile Endpoint</small>
                    </div>
                    <div id="oAuthUsernameDiv" class="form-group col-md-12">
                        <label for="oAuthUsername">Username Profile Value</label>
                        <input type="text" class="form-control required" id="oAuthUsername" name="oAuthUsername" required>
                        <small id="oAuthUsernameHelp" class="form-text text-muted">Username Attribute Retrieved from Profile Endpoint</small>
                    </div>
                    <div id="oAuthEmailDiv" class="form-group col-md-12">
                        <label for="oAuthEmail">Email Profile Value</label>
                        <input type="text" class="form-control required" id="oAuthEmail" name="oAuthEmail" required>
                        <small id="oAuthEmailHelp" class="form-text text-muted">Email Address Attribute Retrieved from Profile Endpoint</small>
                    </div>
                </div>
                <input type="hidden" id="oAuthID" name="oAuthID">
                <input type="hidden" value="oAuthProvider" id="settingType" name="settingType">
            </div>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="resetOAuthForm();">Cancel</button>
        <input type="submit" class="btn btn-success" value="Add/Edit">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro delete_oauth_provider() %}
<div class="modal fade" id="deleteOauthModal" tabindex="-1" role="dialog" aria-labelledby="deleteOAuthModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" method="post">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteOauthModalTitle">Delete a OAuth Provider</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="form-group col-md-12">
                        <p>Any Users that registered under the OAuth Provider will be reassigned to local authentication and passwords set to a random value.  Users will need to perform a password reset to regain access.</p>
                        <p>Are you sure you want to delete the OAuth Provider?</p>
                        <input type="hidden" id="DeleteOAuthProviderID" name="DeleteOAuthProviderID">
                        <input type="hidden" value="DeleteOAuthProvider" id="settingType" name="settingType">
                    </div>
                </div>
            </div>
          </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal">Cancel</button>
        <input type="submit" class="btn btn-danger" value="Delete">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro new_rtmp_server() %}
<div class="modal fade" id="newRTMPModal" tabindex="-1" role="dialog" aria-labelledby="newRTMPModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" method="post">
      <div class="modal-header">
        <h5 class="modal-title" id="newRTMPModalTitle">Add a New RTMP Server</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="form-group col-md-6">
                    <label for="rtmpAddress">Full Qualified Domain Name or IP Address:</label>
                    <input type="text" name="address" id="rtmpAddress" class="form-control"
                           pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^(?:(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){6})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:::(?:(?:(?:[0-9a-fA-F]{1,4})):){5})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){4})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,1}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){3})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,2}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){2})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,3}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:[0-9a-fA-F]{1,4})):)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,4}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,5}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,6}(?:(?:[0-9a-fA-F]{1,4})))?::))))$"
                           required autocomplete="new-password">
                </div>
            </div>
            <br>
          </div>
          <input type="hidden" value="rtmpServer" id="settingType" name="settingType">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        <input type="submit" class="btn btn-success" value="Add">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro new_edge_server() %}
<div class="modal fade" id="newEdgeModal" tabindex="-1" role="dialog" aria-labelledby="newEdgeModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" method="post">
      <div class="modal-header">
        <h5 class="modal-title" id="newEdgeModalTitle">Add a New Edge Streamer Node</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="form-group col-md-6">
                    <label for="edgeAddress">Full Qualified Domain Name or IP Address:</label>
                    <input type="text" name="address" id="edgeAddress" class="form-control"
                           pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^(?:(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){6})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:::(?:(?:(?:[0-9a-fA-F]{1,4})):){5})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){4})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,1}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){3})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,2}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){2})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,3}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:[0-9a-fA-F]{1,4})):)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,4}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,5}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,6}(?:(?:[0-9a-fA-F]{1,4})))?::))))$"
                           required autocomplete="new-password">
                </div>
                <div class="form-group col-md-3">
                    <label for="edgeAddress">HTTP Port</label>
                    <input type="number" name="edgePort" id="edgePort" class="form-control" required autocomplete="new-password" value="80">
                </div>
                <div class="form-group col-md-3">
                    <label for="edgeAddress">Load %</label>
                    <div class="input-group mb-3">
                        <input type="number" name="edgeLoad" id="edgeLoad" class="form-control" required autocomplete="new-password" min="1" max="100">
                        <div class="input-group-append">
                          <span class="input-group-text" id="basic-addon2">%</span>
                        </div>
                    </div>
                </div>
            </div>
            <br>
          </div>
          <input type="hidden" value="edgeNode" id="settingType" name="settingType">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        <input type="submit" class="btn btn-success" value="Add">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro delete_webhook() %}
<div class="modal fade" id="confirmDeleteWebhookModal" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteWebhookModalTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="confirmDeleteWebhookModalTitle">Delete Webhook</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          </div>
          <div class="modal-body">
              Are you sure you want to delete the webhook?
              <input id="deleteWebhookID" type="hidden">
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-success" data-bs-dismiss="modal" onclick="deleteWebhook();">Delete</button>
          </div>
        </div>
    </div>
</div>
{% endmacro %}

{% macro new_webhook() %}
<div class="modal fade" id="newWebhookModal" tabindex="-1" role="dialog" aria-labelledby="newWebhookModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newWebhookModalTitle">Create/Edit Webhook</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
         <div class="row">
             <div class="col-12">
                 <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="webhookName">Name</label>
                        <input id="webhookName" class="form-control" autocomplete="new-password">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="webhookEndpoint">Endpoint URL</label>
                        <input id="webhookEndpoint" class="form-control" autocomplete="new-password">
                    </div>
                    <div class="col-md-4"></div>
                    <div class="form-group col-md-12">
                        <label for="webhookHeader">Request Header</label>
                        <textarea id="webhookHeader" class="form-control" maxlength="4096"></textarea>
                    </div>
                    <div class="form-group col-md-12">
                        <label for="webhookPayload">Payload</label>
                        <textarea id="webhookPayload" class="form-control" cols=50 rows=25 maxlength="4096"></textarea>
                    </div>
                    <div class="form-group col-md-2">
                        <label for="webhookReqType">Type</label>
                        <select id="webhookReqType" class="form-control">
                             <option value=0 selected>POST</option>
                             <option value=1>GET</option>
                             <option value=2>PUT</option>
                             <option value=3>DELETE</option>
                        </select>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="webhookTrigger">Trigger Event</label>
                        <select id="webhookTrigger" class="form-control">
                             <option value=0 selected>Stream Start</option>
                             <option value=1>Stream End</option>
                             <option value=2>Stream Viewer Join</option>
                             <option value=4>Stream Name Change</option>
                             <option value=5>Chat Message</option>
                             <option value=6>New Video</option>
                             <option value=7>Video Comment</option>
                             <option value=9>Video Name Change</option>
                             <option value=10>Channel Subscription</option>
                             <option value=20>New User</option>
                        </select>
                    </div>
                    <input id="webhookInputAction" type="hidden">
                    <input id="webhookID" type="hidden">
                 </div>
             </div>
         </div>
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-success" data-bs-dismiss="modal" onclick="submitWebhook();">Save</button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro new_sticker() %}
<div class="modal fade" id="newStickerModal" tabindex="-1" role="dialog" aria-labelledby="newStickerModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" enctype=multipart/form-data method="post">
          <div class="modal-header">
            <h5 class="modal-title" id="newStickerModalTitle">Create New Chat Sticker</h5>
              <div class="float-end">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
          </div>
          <div class="modal-body">
              <div class="container">
                <div class="row">
                    <div class="col-12">
                        <label for="stickerName">Sticker Shortcode</label>
                        <input type="text" name="stickerName" id="stickerNameInput" class="form-control" pattern="[A-Za-z0-9_]+" required autocomplete="new-password">
                        <small id="stickerNameHelp" class="form-text text-muted">Format: A-Z, a-z, 0-9, _ </small>
                    </div>
                </div>
                <br>
                <div class="row">
                      <div class="col-12">
                          <div class="custom-file">
                            <label id="stickerUploadFilename" class="form-label" for="stickerUpload">Upload Sticker</label>
                            <input type="file" class="form-control" name=stickerUpload id="stickerUpload" required>
                          </div>
                      </div>
                      <script>
                        $('#stickerUpload').on('change',function(){
                            //get the file name
                            var fileName = $(this).val();
                            //replace the "Choose a file" label
                            $(this).next('#stickerUploadFilename').html(fileName);
                        })
                      </script>
                </div>
              </div>
              <input type="hidden" value="newSticker" id="settingType" name="settingType">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
            <input type="submit" class="btn btn-success" value="Create">
          </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro delete_sticker() %}
<div class="modal fade" id="deleteStickerModal" tabindex="-1" role="dialog" aria-labelledby="deleteStickerModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteStickerModalTitle">Delete Chat Sticker</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <p>Are you sure you want to delete this Chat Sticker?</p>
            </div>
          </div>
          <input type="hidden" value="" id="deleteStickerID">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" data-bs-dismiss="modal" onclick="deleteSticker();">Delete</button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro disable_2fa() %}
<div class="modal fade" id="disable2faModal" tabindex="-1" role="dialog" aria-labelledby="disable2faModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="disable2faModalTitle">Disable 2FA for User</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            Are you sure you want to disable Two-Factor Authentication for this user?
          </div>
          <input type="hidden" value="" id="disable2FAUser" name="disable2FAUser">
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" onclick="disable2FA();" value="Disable" data-dismiss="modal">Disable</button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro new_user() %}
<div class="modal fade" id="newUserModal" tabindex="-1" role="dialog" aria-labelledby="newUserModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" method="post" onsubmit="return passwordCheck()">
      <div class="modal-header">
        <h5 class="modal-title" id="newUserModalTitle">Create New User</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="col-12">
                    <label for="username">Username</label>
                    <input type="text" name="username" id="username" class="form-control" required autocomplete="new-password">
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-12">
                    <label for="emailaddress">Email Address</label>
                    <input type="text" name="emailaddress" id="emailaddress" class="form-control" required autocomplete="new-password">
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-12">
                    <label for="password1">Password</label>
                    <input type="password" name="password1" id="password1" class="form-control" required autocomplete="new-password">
                </div>
                <br>
                <div class="col-12">
                    <label for="password2">Confirm Password</label>
                    <input type="password" name="password2" id="password2" class="form-control" required autocomplete="new-password">
                </div>
            </div>
            <br>

          </div>
          <input type="hidden" value="newuser" id="settingType" name="settingType">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        <input type="submit" class="btn btn-success" value="Create">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}

{% macro default_roles(defaultRoleDict) %}
<div class="modal fade" id="defaultRolesModal" tabindex="-1" role="dialog" aria-labelledby="defaultRolesModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
          <h5 class="modal-title" id="defaultRolesModalTitle">Set Default Roles</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <h4>Set the default roles for new users:</h4><br>
          <!--User-->
          <div class="input-group mb-3">
            <div class="input-group-text">
              <input class="form-check-input" id="drole-user" name="role-user" type="checkbox"  class="disabled" disabled checked aria-label="Checkbox for User">
            </div>
            <input type="text" class="form-control" readonly aria-label="User" value="User">
          </div>
          <!--Streamer-->
          <div class="input-group mb-3">
            <div class="input-group-text">
              <input class="form-check-input" id="drole-streamer" name="role-streamer" value="streamer" type="checkbox" {% if defaultRoleDict["Streamer"] %} checked {% endif %} aria-label="Checkbox for Streamer">
            </div>
            <input type="text" class="form-control" readonly aria-label="Streamer" value="Streamer">
          </div>
          <!--Recorder-->
          <div class="input-group mb-3">
            <div class="input-group-text">
              <input class="form-check-input" id="drole-recorder" name="role-recorder" type="checkbox" {% if defaultRoleDict["Recorder"] %} checked {% endif %} aria-label="Checkbox for Recorder">
            </div>
            <input type="text" class="form-control" readonly aria-label="Recorder" value="Recorder">
          </div>
          <!--Uploader-->
          <div class="input-group mb-3">
            <div class="input-group-text">
              <input class="form-check-input" id="drole-uploader" name="role-uploader" type="checkbox" {% if defaultRoleDict["Uploader"] %} checked {% endif %} aria-label="Checkbox for Uploader">
            </div>
            <input type="text" class="form-control" readonly aria-label="Recorder" value="Uploader">
          </div>
      </div>
      <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-success" data-bs-dismiss="modal" onclick="updateDefaultRoles();">Save</button>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro new_topic() %}
<div class="modal fade" id="newTopicModal" tabindex="-1" role="dialog" aria-labelledby="newTopicModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <form action="/settings/admin" enctype=multipart/form-data method="post">
      <div class="modal-header">
        <h5 class="modal-title" id="newTopicModalTitle">Create New Topic</h5>
          <div class="float-end">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
      </div>
      <div class="modal-body">
          <div class="container">
            <div class="row">
                <div class="col-12">
                    <input type="text" name="name" id="newEditTopicName" class="form-control" required autocomplete="new-password">
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-12">
                  <div class="topicImg w-100 my-2">
                    <img id="newEditTopicImg" class="mx-auto d-block" src="/static/img/video-placeholder.jpg" onerror="this.src='/static/img/video-placeholder.jpg';">
                  </div>
                </div>
            </div>
            <br>
            <div class="row">
                  <div class="col-12">
                      <div class="custom-file">
                        <input type="file" class="custom-file-input" name=photo id="photo">
                        <label class="custom-file-label" for="photo">Upload a Photo</label>
                      </div>
                  </div>
            </div>
          </div>
          <input type="hidden" value="topics" id="settingType" name="settingType">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cancel</button>
        <input type="submit" class="btn btn-success" value="Create">
      </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}